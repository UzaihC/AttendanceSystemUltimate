
@page
@model AttendanceSystem.Pages.Visitors.ViewVisitorLogsModel
@{
    ViewData["Title"] = "Visitor Logs";
}

<div class="page-header">
    <div class="header-title">CDM Visitor Logs</div>
    <nav>
        <a href="#">Home</a> |
        <a href="#">Privacy</a> |
        <a href="#">About</a>
    </nav>
</div>

<div class="visitor-log-wrapper">

    <!-- Sidebar -->
    <aside class="sidebar">
        <h3>Offices</h3>
        <button class="filter-btn active" data-office="Registrar's Office" onclick="filterTable(this.dataset.office, this)">Registrar's Office</button>
        <button class="filter-btn" onclick="filterTable('Guidance Office', this)">Guidance Office</button>
        <button class="filter-btn" onclick="filterTable('Office of Student Affairs', this)">Office of Student Affairs</button>
        <button class="filter-btn" onclick="filterTable('All', this)">Show All</button>
    </aside>

    <!-- Main Content -->
    <main class="main">
        <h2>@ViewData["Title"]</h2>

        @if (Model.Visitors == null || !Model.Visitors.Any())
        {
            <p>No visitors found.</p>
        }
        else
        {
            <table id="visitorTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Visit Date</th>
                        <th>Purpose of Visit</th>
                        <th>Office</th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var visitor in Model.Visitors)
                {
                    <tr>
                        <td>@visitor.VisitorId</td>
                        <td>@visitor.FullName</td>
                        <td>@visitor.VisitDate.ToString("MM/dd/yyyy hh:mm tt")</td>
                        <td>@visitor.Purpose</td>
                        <td>@visitor.Office</td>
                    </tr>
                }
                </tbody>
            </table>
        }
    </main>
</div>

<style>
    body {
        background: #f3f8f3;
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
    }

    .page-header {
        width: 100%;
        padding: 15px 40px;
        background: rgba(0, 90, 0, 0.7);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 18px;
    }

    .page-header a {
        color: white;
        text-decoration: none;
        margin: 0 5px;
    }

    .visitor-log-wrapper {
        display: flex;
        padding: 40px;
        gap: 25px;
    }

    /* Sidebar Styling */
    .sidebar {
        width: 240px;
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        height: fit-content;
    }

    .sidebar h3 {
        margin-top: 0;
        margin-bottom: 15px;
        color: #004b23;
        font-size: 20px;
        font-weight: bold;
    }

    .sidebar .filter-btn {
        width: 100%;
        padding: 12px;
        margin-bottom: 10px;
        border: none;
        border-radius: 8px;
        background: #e6e6e6;
        cursor: pointer;
        text-align: left;
        font-size: 15px;
        transition: 0.2s;
    }

    .sidebar .filter-btn.active {
        background: #004b23;
        color: white;
        font-weight: bold;
    }

    .sidebar .filter-btn:hover {
        background: #c8e6c9;
    }

    /* Main Content */
    .main {
        flex: 1;
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .main h2 {
        margin-top: 0;
        margin-bottom: 20px;
        color: #004b23;
        font-size: 26px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        border-radius: 8px;
        overflow: hidden;
    }

    thead {
        background: #004b23;
        color: white;
    }

    th, td {
        padding: 12px;
        border-bottom: 1px solid #ddd;
        font-size: 14px;
    }

    tr:hover {
        background: #f1f8f1;
    }
</style>

<script>
    function filterTable(office, button) {
        const rows = document.querySelectorAll("#visitorTable tbody tr");
        const normalizedOffice = office.replace(/[’‘]/g, "'").toLowerCase();

        rows.forEach(row => {
            const officeCell = row.cells[4].innerText.trim();
            const normalizedCell = officeCell.replace(/[’‘]/g, "'").toLowerCase();

            row.style.display = (office === "All" || normalizedCell === normalizedOffice) ? "" : "none";
        });

        document.querySelectorAll(".sidebar .filter-btn").forEach(btn => btn.classList.remove("active"));
        button.classList.add("active");
    }
</script>
